<!-- PARTIE MENU -->
<div class="container-fluid">
  <div class="row">
    <div class="col-12 col-sm-3 col-xl-2" style="background-color: #D4C4F1;">
      <nav class="navbar navbar-expand-lg navbar-light">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
          aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="nav flex-column mx-1">
            <a class="navbar-brand" href="#">
              <img src="/image/SAZ'DRIVE.png" style="height: 120px;" routerLink="/app-accueil" routerLinkActive="active">
            </a>

            <div class="d-block d-sm-none">
              <a class="nav-link fw-semibold" href="" style="text-decoration: none; color: #000000;">CODE DE LA
                ROUTE</a>
              <a class="nav-link fw-semibold" href="" style="text-decoration: none; color: #000000;">PERMIS DE
                CONNDUIRE</a>
              <a class="nav-link fw-semibold" href="" style="text-decoration: none; color: #000000;">RÉSULTATS</a>
              <a class="nav-link fw-semibold" href="" style="text-decoration: none; color: #000000;">À PROPOS</a>
              <hr style="border: 2px solid #B6BFB0; opacity: 1; border-radius: 10px;">
            </div>

            <div class="d-none d-sm-block d-lg-none">
              <a class="nav-link fw-semibold" href="" style="text-decoration: none; color: #000000;">CODE DE LA
                ROUTE</a>
              <a class="nav-link fw-semibold" href="" style="text-decoration: none; color: #000000;">PERMIS DE
                CONNDUIRE</a>
              <a class="nav-link fw-semibold" href="" style="text-decoration: none; color: #000000;">RÉSULTATS</a>
              <a class="nav-link fw-semibold" href="" style="text-decoration: none; color: #000000;">À PROPOS</a>
              <hr style="border: 2px solid #B6BFB0; opacity: 1; border-radius: 10px;">
            </div>

            <div class="d-flex align-items-center">
              <img class="rounded" src="/icone/iconelogout.png" alt="Logout" style="height: 20px; width: 20px;">
              <a class="mx-1 fw-semibold" style="text-decoration: none; color: #000000;" href="javascript:void(0);" (click)="logout()">DÉCONNEXION</a>
            </div>

            <hr style="border: 1px solid #050505; opacity: 1; border-radius: 10px;">
            <div class="d-flex align-items-center mt-3">
              <img class="rounded" src="/icone/iconmenu.png" alt="" style="height: 20px; width: 20px;">
              <a class="mx-1 fw-semibold" style="text-decoration: none; color: #000000;" href="">MENU PRINCIPAL</a>
            </div>
            <hr style="border: 1px solid #050505; opacity: 1; border-radius: 10px;">
            <div class="d-flex align-items-center">
              <img class="rounded" src="/icone/iconedossier.png" alt="" style="height: 20px; width: 20px;">
              <a class="mx-1 fw-semibold" style="text-decoration: none; color: #000000;">GESTION DES ÉLÈVES</a>
            </div>

            <a class="nav-link mt-2 fw-medium menuvertical" href="" style="text-decoration: none; color: #000000;"
              routerLink="/app-admin" routerLinkActive="active">LISTES DES ÉLÈVES</a>
            
              <a class="nav-link fw-medium menuvertical" routerLink="/app-inscription"
              routerLinkActive="active text-decoration: none; color: #000000;">AJOUTER UN
              ÉLÈVE</a>
            
              <a class="nav-link fw-medium menuvertical" routerLink="/app-avis" routerLinkActive="active"
              style="text-decoration: none; color: #000000;">GESTION DES AVIS</a>


            <!--MENU SANS LIENS POUR-->
            <a class="nav-link mt-2 menuvertical" style="text-decoration: none; color: #000000;"></a>
            <a class="nav-link mt-2 menuvertical" style="text-decoration: none; color: #000000;"></a>
            <a class="nav-link mt-5 menuvertical" style="text-decoration: none; color: #000000;"></a>
            <a class="nav-link mt-5 menuvertical" style="text-decoration: none; color: #000000;"></a>
            <a class="nav-link mt-5 menuvertical" style="text-decoration: none; color: #000000;"></a>
            <a class="nav-link mt-5 menuvertical" style="text-decoration: none; color: #000000;"></a>
            <a class="nav-link mt-5 menuvertical" style="text-decoration: none; color: #000000;"></a>
            <a class="nav-link mt-5 menuvertical" style="text-decoration: none; color: #000000;"></a>
            <a class="nav-link mt-5 menuvertical" style="text-decoration: none; color: #000000;"></a>
            <a class="nav-link mt-5 menuvertical" style="text-decoration: none; color: #000000;"></a>
            <a class="nav-link mt-5 menuvertical" style="text-decoration: none; color: #000000;"></a>
            <a class="nav-link mt-5 menuvertical" style="text-decoration: none; color: #000000;"></a>
            <a class="nav-link mt-5 menuvertical" style="text-decoration: none; color: #000000;"></a>
            <a class="nav-link mt-5 menuvertical" style="text-decoration: none; color: #000000;"></a>
            <a class="nav-link mt-5 menuvertical" style="text-decoration: none; color: #000000;"></a>

          </ul>
        </div>
      </nav>
    </div>
    
    <div class="form-container">
      <h1>MODIFIER UN ÉLÈVE</h1>
      <p class="subtitle">MODIFIER LES INFORMATIONS D'UN ÉLÈVE POUR METTRE À JOUR SON DOSSIER </p>

      <!-- Messages d'erreur/succès -->
      <div *ngIf="error" class="alert alert-danger mb-4">{{ error }}</div>
      <div *ngIf="message" class="alert alert-success mb-4">{{ message }}</div>

      <!-- Affichage du chargement -->
      <div *ngIf="loading" class="text-center my-5">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Chargement...</span>
        </div>
        <p class="mt-2">Chargement des informations de l'élève...</p>
      </div>

      <div class="form-card" *ngIf="!loading">

        <form [formGroup]="eleveForm" (ngSubmit)="onSubmit()">
          <div class="form-row">
            <div class="form-group">
              <label for="nom">NOM</label>
              <input type="text" id="nom" formControlName="nom">
              <div *ngIf="eleveForm.get('nom')?.invalid && eleveForm.get('nom')?.touched" class="text-danger">
                Nom requis
              </div>
            </div>
            <div class="form-group">
              <label for="prenom">PRÉNOM</label>
              <input type="text" id="prenom" formControlName="prenom">
              <div *ngIf="eleveForm.get('prenom')?.invalid && eleveForm.get('prenom')?.touched" class="text-danger">
                Prénom requis
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group date-group" formGroupName="dateNaissance">
              <label>DATE DE NAISSANCE</label>
              <div class="date-inputs">
                <input type="text" formControlName="jour" placeholder="JJ">
                <span class="date-separator">/</span>
                <input type="text" formControlName="mois" placeholder="MM">
                <span class="date-separator">/</span>
                <input type="text" formControlName="annee" placeholder="AAAA">
              </div>
              <div
                *ngIf="(eleveForm.get('dateNaissance.jour')?.invalid && eleveForm.get('dateNaissance.jour')?.touched) || 
                          (eleveForm.get('dateNaissance.mois')?.invalid && eleveForm.get('dateNaissance.mois')?.touched) ||
                          (eleveForm.get('dateNaissance.annee')?.invalid && eleveForm.get('dateNaissance.annee')?.touched)"
                class="text-danger">
                Date de naissance invalide
              </div>
            </div>
            <div class="form-group">
              <label for="codeNEPH">CODE NEPH</label>
              <input type="text" id="codeNEPH" formControlName="codeNEPH">
              <div *ngIf="eleveForm.get('codeNEPH')?.invalid && eleveForm.get('codeNEPH')?.touched" class="text-danger">
                Code NEPH requis
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="telephone">TÉLÉPHONE</label>
              <input type="text" id="telephone" formControlName="telephone">
              <div *ngIf="eleveForm.get('telephone')?.invalid && eleveForm.get('telephone')?.touched"
                class="text-danger">
                Téléphone requis
              </div>
            </div>
            <div class="form-group">
              <label for="ville">VILLE</label>
              <input type="text" id="ville" formControlName="ville">
              <div *ngIf="eleveForm.get('ville')?.invalid && eleveForm.get('ville')?.touched" class="text-danger">
                Ville requise
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="email">ADRESSE EMAIL</label>
            <input type="email" id="email" formControlName="email">
            <div *ngIf="eleveForm.get('email')?.invalid && eleveForm.get('email')?.touched" class="text-danger">
              Email valide requis
            </div>
          </div>

          <div class="form-group">
            <label for="motDePasse">MOT DE PASSE</label>
            <input type="password" id="motDePasse" formControlName="motDePasse">
            <div *ngIf="eleveForm.get('motDePasse')?.invalid && eleveForm.get('motDePasse')?.touched"
              class="text-danger">
              Mot de passe requis
            </div>
          </div>

          <div class="form-buttons">
            <button type="submit" class="btn btn-update" [disabled]="eleveForm.invalid">METTRE À JOUR</button>
            <button type="button" class="btn btn-delete" (click)="supprimerEleve()">SUPPRIMER</button>
          </div>
        </form>
      </div>
    </div>
